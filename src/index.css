@import "tailwindcss";

/* ============ THEME ============ */
:root {
  color-scheme: light;
  --brand-primary: #334e36;
  --brand-primary2: #394f34;
  --brand-sand: #f7e8c3;
  --brand-gold: #c19937;
  --brand-gold2: #dec989;
  --ink: #171717;
  --ink-soft: #4b5563;
  --ring-soft: color-mix(in oklab, var(--brand-gold) 35%, transparent);
}

html, body, #root { height: 100%; min-height: 100%; }

/* ===== Fondo con imagen + overlay para contraste ===== */
body {
  color: var(--ink);
  background:
    linear-gradient(
      180deg,
      rgba(255,255,255,.70) 0%,
      rgba(255,255,255,.65) 25%,
      rgba(255,255,255,.60) 55%,
      rgba(255,255,255,.65) 100%
    ),
    url("/img/fondo.png") center/cover no-repeat,
    var(--brand-sand);
  background-attachment: fixed; /* mantiene el fondo fijo */
  -webkit-background-attachment: scroll; /* fix para Safari móvil */
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
  padding-left: max(env(safe-area-inset-left), 0px);
  padding-right: max(env(safe-area-inset-right), 0px);
}

/* En móviles, usamos pseudo-elemento para simular el fixed */
@media (max-width: 767px) {
  body {
    background-attachment: scroll;
  }
  body::before {
    content: "";
    position: fixed;
    inset: 0;
    background:
      linear-gradient(
        180deg,
        rgba(255,255,255,.70) 0%,
        rgba(255,255,255,.65) 25%,
        rgba(255,255,255,.60) 55%,
        rgba(255,255,255,.65) 100%
      ),
      url("/img/fondo.png") center/cover no-repeat,
      var(--brand-sand);
    z-index: -1;
  }
}

/* Tipografías */
@layer base {
  :root {
    --font-script: "Great Vibes", cursive;
    --font-body: "Tenor Sans", system-ui, sans-serif;
  }
  * { font-feature-settings: "liga" 1, "kern" 1; }
  h1, h2, h3, .font-heading { font-family: var(--font-script); }
  body, .font-body { font-family: var(--font-body); }
}

/* ============ COMPONENTS & UTILITIES ============ */
@layer utilities {
  .wrapper {
    width: min(100%, 1040px);
    margin-inline: auto;
    padding-inline: 1rem;
    padding-block: 1rem;
  }
  @media (min-width: 768px) {
    .wrapper { padding-inline: 1.25rem; padding-block: 1.25rem; }
  }

  .card {
    width: 100%;
    max-width: min(720px, 100% - 24px);
    margin-inline: auto;
    border-radius: 18px;
    border: 1px solid color-mix(in oklab, var(--brand-gold2) 45%, #fff);
    background: rgba(255,255,255,.88);
    box-shadow: 0 25px 50px rgba(0,0,0,.08), inset 0 0 0 1px rgba(255,255,255,.5);
    -webkit-backdrop-filter: blur(8px);
    backdrop-filter: blur(8px);
  }
  @supports not ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))) {
    .card { background: rgba(255,255,255,.98); }
  }

  .input {
    width: 100%;
    border-radius: 12px;
    border: 1px solid rgba(0,0,0,.08);
    background: #fff;
    padding: .8rem 1rem;
    outline: none;
    transition: box-shadow .2s ease, border-color .2s ease, transform .06s ease;
    box-shadow: 0 8px 24px rgba(0,0,0,.04);
  }
  .input::placeholder { color: #9aa4b2; }
  .input:focus {
    border-color: color-mix(in oklab, var(--brand-gold) 35%, transparent);
    box-shadow: 0 12px 30px rgba(0,0,0,.06), 0 0 0 3px var(--ring-soft);
  }

  .btn-primary {
    display: inline-flex; align-items: center; justify-content: center;
    gap: .5rem;
    border-radius: 12px;
    padding: .9rem 1rem;
    font-weight: 700;
    letter-spacing: .2px;
    color: #fff;
    background: linear-gradient(180deg, var(--brand-primary), var(--brand-primary2));
    box-shadow: 0 12px 28px rgba(0,0,0,.12), 0 0 0 1px rgba(255,255,255,.2) inset;
    transition: transform .08s ease, filter .2s ease;
    width: 100%;
  }
  @media (min-width: 768px) { .btn-primary { width: auto; } }
  .btn-primary:hover { filter: brightness(1.04); transform: translateY(-1px); }
  .btn-primary:active { transform: translateY(0); }
  .btn-primary:disabled { opacity: .55; cursor: not-allowed; }

  .btn-ghost {
    display: inline-flex; align-items: center; justify-content: center;
    border-radius: 999px;
    padding: .65rem 1rem;
    font-weight: 600;
    border: 1px solid rgba(0,0,0,.08);
    background: linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.85));
    transition: background .2s ease, border-color .2s ease;
    width: 100%;
  }
  .btn-ghost:hover { background: rgba(255,255,255,.97); border-color: color-mix(in oklab, var(--brand-gold2) 55%, transparent); }
  @media (min-width: 768px) { .btn-ghost { width: auto; } }

  .chip {
    display: inline-flex; align-items: center; justify-content: center;
    min-width: clamp(72px, 26vw, 110px);
    border-radius: 999px;
    padding: .55rem clamp(.8rem, 2.8vw, 1.1rem);
    border: 1px solid color-mix(in oklab, var(--brand-gold2) 55%, #fff);
    background: #fff;
    font-weight: 700;
    font-size: clamp(14px, 3.8vw, 16px);
    transition: all .18s ease;
    text-transform: uppercase;
    letter-spacing: .02em;
    white-space: nowrap;
  }
  .chip.is-on {
    background: var(--brand-primary);
    color: #fff;
    border-color: var(--brand-primary2);
    box-shadow: 0 0 0 3px color-mix(in oklab, var(--brand-primary) 22%, transparent);
  }

  .guest-row {
    display: grid;
    grid-template-columns: auto 1fr auto;
    gap: .9rem 1rem;
    align-items: center;
    border: 1px solid color-mix(in oklab, var(--brand-gold2) 55%, #fff);
    background: rgba(255,255,255,.94);
    border-radius: 14px;
    padding: .95rem 1.05rem;
  }
  @media (min-width: 768px) { .guest-row { padding: 1rem 1.25rem; } }

  .guest-row__top { display: flex; align-items: flex-start; gap: .9rem; min-width: 0; }
  .guest-row__options { justify-self: end; display: inline-flex; gap: .6rem; flex-wrap: nowrap; max-width: 100%; }

  @media (max-width: 420px) {
    .guest-row { grid-template-columns: auto 1fr; }
    .guest-row__options {
      grid-column: 1 / -1; justify-self: end; margin-top: .25rem; flex-wrap: wrap; row-gap: .4rem;
    }
  }

  .check { accent-color: var(--brand-primary); }
  .radio { accent-color: var(--brand-primary); }

  .ornament { position: relative; height: 24px; display: grid; place-items: center; }
  .ornament::before,
  .ornament::after {
    content: ""; height: 1px; width: 38%;
    background: linear-gradient(90deg, transparent, var(--brand-gold2), transparent);
  }
  .ornament .dot {
    width: 8px; height: 8px; border-radius: 999px;
    background: var(--brand-gold);
    box-shadow: 0 0 0 3px color-mix(in oklab, var(--brand-gold) 25%, transparent);
  }

  .muted { color: var(--ink-soft); }
  .actions-group { display: grid; gap: .6rem; }
  @media (min-width: 768px) {
    .actions-group { grid-auto-flow: column; justify-content: end; align-items: center; gap: .75rem; }
  }
}

/* =========================
   HOME / INVITACIÓN
   ========================= */
@layer utilities {
  /* ------------- Landing con sobre cerrado ------------- */
  .hero-closed {
    position: relative;
    width: 100%;
    min-height: 100svh;
    display: grid;
    place-items: center;
    overflow: hidden;
  }
  .hero-closed__img {
    width: min(100vw, 1200px);
    height: auto;
    max-height: 100svh;
    object-fit: contain;
    display: block;
    -webkit-user-select: none;
    user-select: none;
    pointer-events: none;
  }
  .hero-closed .seal-hitbox{
    position: absolute;
    z-index: 5;
    width: clamp(64px, 10vw, 120px);
    aspect-ratio: 1 / 1;
    border-radius: 999px;
    left: 50%;
    top: 56%;
    transform: translate(-50%, -50%);
    border: 0;
    cursor: pointer;
    background: radial-gradient(closest-side, rgba(255,215,0,.18), rgba(255,215,0,0));
    transition: transform .2s ease;
  }
  .hero-closed .seal-hitbox:hover{ transform: translate(-50%, -50%) scale(1.04); }
  .hero-closed .seal-hitbox:active{ transform: translate(-50%, -50%) scale(.98); }
  @media (max-width: 480px) and (min-height: 740px) {
    .hero-closed .seal-hitbox { top: 58%; }
  }

  /* ------------- Escenario de invitación (página /invitacion) ------------- */
  :root{ --par: 0px; --par2: 0px; } /* parallax variables por scroll */

  .invite-stage{
    position: relative;
    width: min(92vw, 1200px);
    min-height: 100svh;
    display: grid;
    place-items: center;
    overflow: visible;
  }
  .invite-stage img{
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    max-width: 100%;
    max-height: 92vh;
    height: auto;
    object-fit: contain;
    -webkit-user-select: none;
    user-select: none;
    pointer-events: none;
    will-change: transform, opacity, filter;
  }
  .is-ready{
    opacity: 1;
    transition: transform 2s ease-in-out, opacity 2s ease-in-out, filter 2s ease-in-out;
  }
  .invite-stage img:not(.is-ready){ opacity: 0; }

  /* Desktop: una sola imagen (completa.png) */
  .desk-open{ z-index: 6; opacity: 0; transform: translate(-50%, -44%) scale(.985); filter: drop-shadow(0 18px 30px rgba(0,0,0,.12)); }
  .desk-open.is-in{ opacity: 1; transform: translate(-50%, -50%) translateY(var(--par)) scale(1); filter: drop-shadow(0 24px 40px rgba(0,0,0,.18)); }

  /* Móvil: sobre abierto + carta */
  .env-open{ z-index: 5; opacity: 0; transform: translate(-50%, -46%) scale(.985); filter: drop-shadow(0 18px 30px rgba(0,0,0,.12)); }
  .env-open.is-in{ opacity: 1; transform: translate(-50%, -52%) translateY(var(--par)) scale(1); filter: drop-shadow(0 24px 40px rgba(0,0,0,.18)); }
  .letter{ z-index: 8; opacity: 0; transform: translate(-50%, -40%) scale(.95); filter: drop-shadow(0 10px 20px rgba(0,0,0,.10)); }
  .letter.is-out{ opacity: 1; transform: translate(-50%, 26%) translateY(var(--par2)) scale(1); filter: drop-shadow(0 20px 40px rgba(0,0,0,.22)); }

  /* Mostrar/ocultar por breakpoint */
  @media (min-width: 768px){ .env-open, .letter{ display:none; } }
  @media (max-width: 767px){ .desk-open{ display:none; } }

  /* En móvil reservamos altura (evita salto al animar) */
  @media (max-width: 767px){
    .invite-stage{
      width: 100%;
      max-width: 420px;
      margin-inline: auto;
      min-height: 175svh;
    }
    .invite-stage.is-open{ min-height: 100svh; }
  }

  /* ------------- Tarjetas inferiores ------------- */
  .extras-wrap{
    width: min(100%, 1100px);
    margin-inline: auto;
    margin-top: clamp(1.25rem, 2.5vw, 2rem);
    transition: opacity .6s ease, margin-top .8s ease;
  }
  .extras-grid{
    display: grid;
    gap: 2rem;
    justify-items: center;
  }
  @media (min-width: 768px){
    .extras-grid{ grid-template-columns: 1fr 1fr; gap: 2.5rem; align-items: start; }
  }
  .extras-grid img{
    width: 100%; height: auto; object-fit: contain; max-width: 560px;
    transition: transform .25s ease, filter .25s ease;
    will-change: transform;
  }
  .extras-grid a:hover img { transform: translateY(-4px); filter: drop-shadow(0 6px 10px rgba(0,0,0,.12)); }
  .extras-grid a:active img { transform: translateY(-1px) scale(.98); }

  /* Revelado suave cuando aparecen en viewport */
  .reveal { opacity: 0; transform: translateY(16px); transition: opacity .6s ease, transform .6s ease; }
  .reveal.in-view { opacity: 1; transform: translateY(0); }

  /* Accesibilidad */
  @media (prefers-reduced-motion: reduce){
    .invite-stage img{ transition: none !important; }
    .extras-grid img{ transition: none !important; }
    .reveal{ transition: none !important; }
  }
}

/* Empuje del contenido inferior en móvil cuando termina la animación */
@media (max-width: 767px) {
  .invite-stage.is-open + .extras-wrap { margin-top: 50vh; }
}

