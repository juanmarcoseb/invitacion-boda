@import "tailwindcss";

/* ============ THEME ============ */
:root {
  color-scheme: light;

  /* Paleta */
  --brand-primary: #334e36;   /* verde principal */
  --brand-primary2: #394f34;  /* verde extra */
  --brand-sand: #f7e8c3;      /* arena cálido */
  --brand-gold: #c19937;      /* dorado acento */
  --brand-gold2: #dec989;     /* dorado suave */

  --ink: #171717;             /* texto */
  --ink-soft: #4b5563;        /* gris 600 */

  --ring-soft: color-mix(in oklab, var(--brand-gold) 35%, transparent);
}

html, body, #root { height: 100%; min-height: 100%; }

/* ===== Fondo con imagen + overlay para contraste ===== */
body {
  color: var(--ink);
  background:
    linear-gradient(
      180deg,
      rgba(255,255,255,.70) 0%,
      rgba(255,255,255,.65) 25%,
      rgba(255,255,255,.60) 55%,
      rgba(255,255,255,.65) 100%
    ),
    url("/img/fondo.png") center/cover no-repeat fixed,
    var(--brand-sand);
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;

  /* Respeta safe areas en iOS */
  padding-left: max(env(safe-area-inset-left), 0px);
  padding-right: max(env(safe-area-inset-right), 0px);
}

/* iOS Safari: sin fixed para evitar jitter */
@media (max-width: 767px) {
  body {
    background:
      linear-gradient(
        180deg,
        rgba(255,255,255,.70) 0%,
        rgba(255,255,255,.65) 25%,
        rgba(255,255,255,.60) 55%,
        rgba(255,255,255,.65) 100%
      ),
      url("/img/fondo.png") center/cover no-repeat,
      var(--brand-sand);
  }
}

/* Tipografías (Google Fonts ya están enlazadas en index.html)
   Great Vibes = títulos; Tenor Sans = textos */
@layer base {
  :root {
    --font-script: "Great Vibes", cursive;             /* TÍTULOS */
    --font-body: "Tenor Sans", system-ui, sans-serif;  /* Textos */
  }

  * { font-feature-settings: "liga" 1, "kern" 1; }

  h1, h2, h3, .font-heading { font-family: var(--font-script); }
  body, .font-body { font-family: var(--font-body); }
}

/* ============ COMPONENTS & UTILITIES ============ */
@layer utilities {
  /* Contenedor responsivo centrado con padding seguro */
  .wrapper {
    width: min(100%, 1040px);
    margin-inline: auto;
    padding-inline: 1rem;
    padding-block: 1rem;
  }
  @media (min-width: 768px) {
    .wrapper { padding-inline: 1.25rem; padding-block: 1.25rem; }
  }

  /* Tarjeta tipo “glass” con tope de ancho realmente responsive */
  .card {
    width: 100%;
    /* nunca pegar al borde en móvil */
    max-width: min(720px, 100% - 24px);
    margin-inline: auto;

    border-radius: 18px;
    border: 1px solid color-mix(in oklab, var(--brand-gold2) 45%, #fff);
    background: rgba(255,255,255,.88);
    box-shadow:
      0 25px 50px rgba(0,0,0,.08),
      inset 0 0 0 1px rgba(255,255,255,.5);
    -webkit-backdrop-filter: blur(8px);
    backdrop-filter: blur(8px);
  }
  @supports not ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))) {
    .card { background: rgba(255,255,255,.98); }
  }

  /* Inputs/textarea */
  .input {
    width: 100%;
    border-radius: 12px;
    border: 1px solid rgba(0,0,0,.08);
    background: #fff;
    padding: .8rem 1rem;
    outline: none;
    transition: box-shadow .2s ease, border-color .2s ease, transform .06s ease;
    box-shadow: 0 8px 24px rgba(0,0,0,.04);
  }
  .input::placeholder { color: #9aa4b2; }
  .input:focus {
    border-color: color-mix(in oklab, var(--brand-gold) 35%, transparent);
    box-shadow:
      0 12px 30px rgba(0,0,0,.06),
      0 0 0 3px var(--ring-soft);
  }

  /* Botón primario */
  .btn-primary {
    display: inline-flex; align-items: center; justify-content: center;
    gap: .5rem;
    border-radius: 12px;
    padding: .9rem 1rem;
    font-weight: 700;
    letter-spacing: .2px;
    color: #fff;
    background: linear-gradient(180deg, var(--brand-primary), var(--brand-primary2));
    box-shadow:
      0 12px 28px rgba(0,0,0,.12),
      0 0 0 1px rgba(255,255,255,.2) inset;
    transition: transform .08s ease, filter .2s ease;
    width: 100%; /* full-width en móvil */
  }
  @media (min-width: 768px) {
    .btn-primary { width: auto; }
  }
  .btn-primary:hover { filter: brightness(1.04); transform: translateY(-1px); }
  .btn-primary:active { transform: translateY(0); }
  .btn-primary:disabled { opacity: .55; cursor: not-allowed; }

  /* Botón “ghost” (borde) */
  .btn-ghost {
    display: inline-flex; align-items: center; justify-content: center;
    border-radius: 999px;
    padding: .65rem 1rem;
    font-weight: 600;
    border: 1px solid rgba(0,0,0,.08);
    background: linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.85));
    transition: background .2s ease, border-color .2s ease;
    width: 100%; /* full-width en móvil */
  }
  .btn-ghost:hover { background: rgba(255,255,255,.97); border-color: color-mix(in oklab, var(--brand-gold2) 55%, transparent); }
  @media (min-width: 768px) {
    .btn-ghost { width: auto; }
  }

  /* Chips Sí / No — adaptativas, no se salen en móvil */
  .chip {
    display: inline-flex; align-items: center; justify-content: center;
    /* ancho y tipografía fluidos según viewport */
    min-width: clamp(72px, 26vw, 110px);
    border-radius: 999px;
    padding: .55rem clamp(.8rem, 2.8vw, 1.1rem);
    border: 1px solid color-mix(in oklab, var(--brand-gold2) 55%, #fff);
    background: #fff;
    font-weight: 700;
    font-size: clamp(14px, 3.8vw, 16px);
    transition: all .18s ease;
    text-transform: uppercase;
    letter-spacing: .02em;
    white-space: nowrap;
  }
  /* ▶︎ Estado seleccionado MUCHO más visible */
  .chip.is-on {
    background: var(--brand-primary);
    color: #fff;
    border-color: var(--brand-primary2);
    box-shadow: 0 0 0 3px color-mix(in oklab, var(--brand-primary) 22%, transparent);
  }

  /* Fila invitado — por defecto 3 columnas para alinear a derecha */
  .guest-row {
    display: grid;
    grid-template-columns: auto 1fr auto; /* checkbox | nombre | botones */
    gap: .9rem 1rem;
    align-items: center;
    border: 1px solid color-mix(in oklab, var(--brand-gold2) 55%, #fff);
    background: rgba(255,255,255,.94);
    border-radius: 14px;
    padding: .95rem 1.05rem;
  }
  @media (min-width: 768px) {
    .guest-row { padding: 1rem 1.25rem; }
  }

  .guest-row__top {
    display: flex; align-items: flex-start; gap: .9rem;
    min-width: 0;
  }

  /* Botones SI/NO pegados a la derecha */
  .guest-row__options {
    justify-self: end;            /* clave: siempre a la derecha */
    display: inline-flex;
    gap: .6rem;
    flex-wrap: nowrap;
    max-width: 100%;
  }

  /* En teléfonos muy angostos, baja las chips a la 2ª línea (derecha) para evitar desbordes */
  @media (max-width: 420px) {
    .guest-row {
      grid-template-columns: auto 1fr;      /* checkbox | nombre */
    }
    .guest-row__options {
      grid-column: 1 / -1;                  /* ocupar ancho completo debajo */
      justify-self: end;                    /* pero alineadas a la derecha */
      margin-top: .25rem;
      flex-wrap: wrap;                      /* permite salto si no cabe */
      row-gap: .4rem;
    }
  }

  .check { accent-color: var(--brand-primary); }
  .radio { accent-color: var(--brand-primary); }

  /* Ornament */
  .ornament {
    position: relative; height: 24px; display: grid; place-items: center;
  }
  .ornament::before,
  .ornament::after {
    content: "";
    height: 1px; width: 38%;
    background: linear-gradient(90deg, transparent, var(--brand-gold2), transparent);
  }
  .ornament .dot {
    width: 8px; height: 8px; border-radius: 999px;
    background: var(--brand-gold);
    box-shadow: 0 0 0 3px color-mix(in oklab, var(--brand-gold) 25%, transparent);
  }

  .muted { color: var(--ink-soft); }

  /* Grupo de acciones: grid en móvil, fila en desktop */
  .actions-group {
    display: grid; gap: .6rem;
  }
  @media (min-width: 768px) {
    .actions-group {
      grid-auto-flow: column;
      justify-content: end;
      align-items: center;
      gap: .75rem;
    }
  }
}
